<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labirinto do Gumball</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .game-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        .game-header {
            margin-bottom: 20px;
        }

        .game-header h1 {
            color: #00d4ff;
            font-size: 2em;
            text-shadow: 0 0 10px #00d4ff;
        }

        .game-header p {
            color: #ff6b9d;
            font-size: 1.1em;
        }

        .game-info {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .game-info span {
            background: rgba(0, 212, 255, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #00d4ff;
        }

        .maze-container {
            display: inline-block;
            background: linear-gradient(135deg, #1a1a2e, #0f0f23);
            padding: 10px;
            border-radius: 15px;
            border: 3px solid #00d4ff;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.3);
        }

        .maze {
            display: grid;
            gap: 2px;
        }

        .maze-cell {
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .maze-cell.wall {
            background: linear-gradient(135deg, #2d3436, #636e72);
        }

        .maze-cell.path {
            background: linear-gradient(135deg, #0f3460, #16213e);
        }

        .maze-cell.player {
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            animation: playerGlow 1s ease infinite alternate;
        }

        .maze-cell.goal {
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            animation: goalGlow 1s ease infinite alternate;
        }

        .maze-cell.visited {
            background: linear-gradient(135deg, #1b4332, #2d6a4f);
        }

        @keyframes playerGlow {
            from { box-shadow: 0 0 10px #00d4ff; }
            to { box-shadow: 0 0 25px #00d4ff; }
        }

        @keyframes goalGlow {
            from { box-shadow: 0 0 10px #ff6b9d; }
            to { box-shadow: 0 0 25px #ff6b9d; }
        }

        .controls {
            margin: 20px 0;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(3, 60px);
            gap: 5px;
            justify-content: center;
            margin-bottom: 15px;
        }

        .control-btn {
            width: 60px;
            height: 60px;
            font-size: 1.8em;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: white;
        }

        .control-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.5);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-btn.empty {
            visibility: hidden;
        }

        .keyboard-hint {
            color: #888;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .game-status {
            font-size: 1.3em;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            background: rgba(0, 212, 255, 0.1);
            min-height: 50px;
        }

        .game-status.win {
            background: rgba(82, 183, 136, 0.2);
            color: #52b788;
            animation: celebrate 0.5s ease;
        }

        @keyframes celebrate {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .btn-voltar {
            display: inline-block;
            background: linear-gradient(135deg, #ff6b9d, #c44569);
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-voltar:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.5);
        }

        .btn-restart {
            display: inline-block;
            background: linear-gradient(135deg, #00d4ff, #0099cc);
            color: white;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: all 0.3s ease;
            border: none;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-restart:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.5);
        }

        .level-selector {
            margin-bottom: 20px;
        }

        .level-selector button {
            background: rgba(0, 212, 255, 0.2);
            border: 2px solid #00d4ff;
            color: white;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .level-selector button:hover,
        .level-selector button.active {
            background: #00d4ff;
            color: #0a0a0f;
        }

        .game-buttons {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="stars"></div>

    <div class="game-container">
        <div class="game-header">
            <h1>üß© Labirinto do Gumball</h1>
            <p>Ajuda o Gumball üê± a chegar ao bolo üéÇ!</p>
        </div>

        <div class="level-selector">
            <span>N√≠vel:</span>
            <button onclick="setLevel(1)" id="level-1" class="active">1 - F√°cil</button>
            <button onclick="setLevel(2)" id="level-2">2 - M√©dio</button>
            <button onclick="setLevel(3)" id="level-3">3 - Dif√≠cil</button>
        </div>

        <div class="game-info">
            <span>üö∂ Passos: <span id="steps">0</span></span>
            <span>‚è±Ô∏è Tempo: <span id="timer">0</span>s</span>
            <span>üèÜ N√≠vel: <span id="current-level">1</span></span>
        </div>

        <div class="maze-container">
            <div class="maze" id="maze">
                <!-- Maze will be generated by JavaScript -->
            </div>
        </div>

        <div class="controls">
            <div class="controls-grid">
                <button class="control-btn empty"></button>
                <button class="control-btn" onclick="move('up')">‚¨ÜÔ∏è</button>
                <button class="control-btn empty"></button>
                <button class="control-btn" onclick="move('left')">‚¨ÖÔ∏è</button>
                <button class="control-btn" onclick="move('down')">‚¨áÔ∏è</button>
                <button class="control-btn" onclick="move('right')">‚û°Ô∏è</button>
            </div>
            <p class="keyboard-hint">Dica: Tamb√©m podes usar as setas do teclado! ‚å®Ô∏è</p>
        </div>

        <div class="game-status" id="game-status">
            Usa as setas para mover o Gumball!
        </div>

        <div class="game-buttons">
            <button onclick="restartLevel()" class="btn-restart">üîÑ Recome√ßar N√≠vel</button>
            <a href="index.html" class="btn-voltar">‚¨ÖÔ∏è Voltar ao Site</a>
        </div>
    </div>

    <script>
        // Labirintos predefinidos (1 = parede, 0 = caminho)
        const mazes = {
            1: [
                [1,1,1,1,1,1,1,1,1],
                [1,0,0,0,1,0,0,0,1],
                [1,0,1,0,1,0,1,0,1],
                [1,0,1,0,0,0,1,0,1],
                [1,0,1,1,1,0,1,0,1],
                [1,0,0,0,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1]
            ],
            2: [
                [1,1,1,1,1,1,1,1,1,1,1],
                [1,0,0,0,1,0,0,0,0,0,1],
                [1,0,1,0,1,0,1,1,1,0,1],
                [1,0,1,0,0,0,0,0,1,0,1],
                [1,0,1,1,1,1,1,0,1,0,1],
                [1,0,0,0,0,0,0,0,1,0,1],
                [1,1,1,0,1,1,1,1,1,0,1],
                [1,0,0,0,0,0,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1,1,1]
            ],
            3: [
                [1,1,1,1,1,1,1,1,1,1,1,1,1],
                [1,0,0,0,1,0,0,0,1,0,0,0,1],
                [1,0,1,0,1,0,1,0,1,0,1,0,1],
                [1,0,1,0,0,0,1,0,0,0,1,0,1],
                [1,0,1,1,1,1,1,1,1,0,1,0,1],
                [1,0,0,0,0,0,0,0,0,0,1,0,1],
                [1,1,1,1,1,0,1,1,1,1,1,0,1],
                [1,0,0,0,0,0,1,0,0,0,0,0,1],
                [1,0,1,1,1,1,1,0,1,1,1,1,1],
                [1,0,0,0,0,0,0,0,0,0,0,0,1],
                [1,1,1,1,1,1,1,1,1,1,1,1,1]
            ]
        };

        const startPositions = {
            1: { x: 1, y: 1 },
            2: { x: 1, y: 1 },
            3: { x: 1, y: 1 }
        };

        const goalPositions = {
            1: { x: 7, y: 5 },
            2: { x: 9, y: 7 },
            3: { x: 11, y: 9 }
        };

        let currentLevel = 1;
        let playerPos = { ...startPositions[1] };
        let steps = 0;
        let timer = 0;
        let timerInterval = null;
        let gameWon = false;
        let gameStarted = false;

        function setLevel(level) {
            currentLevel = level;
            document.querySelectorAll('.level-selector button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`level-${level}`).classList.add('active');
            document.getElementById('current-level').textContent = level;
            restartLevel();
        }

        function renderMaze() {
            const maze = mazes[currentLevel];
            const mazeElement = document.getElementById('maze');
            mazeElement.innerHTML = '';
            mazeElement.style.gridTemplateColumns = `repeat(${maze[0].length}, 35px)`;

            const goal = goalPositions[currentLevel];

            maze.forEach((row, y) => {
                row.forEach((cell, x) => {
                    const cellElement = document.createElement('div');
                    cellElement.className = 'maze-cell';

                    if (cell === 1) {
                        cellElement.classList.add('wall');
                        cellElement.textContent = 'üß±';
                    } else {
                        cellElement.classList.add('path');

                        if (x === playerPos.x && y === playerPos.y) {
                            cellElement.classList.add('player');
                            cellElement.textContent = 'üê±';
                        } else if (x === goal.x && y === goal.y) {
                            cellElement.classList.add('goal');
                            cellElement.textContent = 'üéÇ';
                        }
                    }

                    mazeElement.appendChild(cellElement);
                });
            });
        }

        function move(direction) {
            if (gameWon) return;

            const maze = mazes[currentLevel];
            let newX = playerPos.x;
            let newY = playerPos.y;

            switch(direction) {
                case 'up': newY--; break;
                case 'down': newY++; break;
                case 'left': newX--; break;
                case 'right': newX++; break;
            }

            // Verifica se o movimento √© v√°lido
            if (newY >= 0 && newY < maze.length &&
                newX >= 0 && newX < maze[0].length &&
                maze[newY][newX] === 0) {

                if (!gameStarted) {
                    gameStarted = true;
                    timerInterval = setInterval(() => {
                        timer++;
                        document.getElementById('timer').textContent = timer;
                    }, 1000);
                }

                playerPos.x = newX;
                playerPos.y = newY;
                steps++;
                document.getElementById('steps').textContent = steps;

                renderMaze();
                checkWin();
            }
        }

        function checkWin() {
            const goal = goalPositions[currentLevel];
            if (playerPos.x === goal.x && playerPos.y === goal.y) {
                gameWon = true;
                clearInterval(timerInterval);

                const statusElement = document.getElementById('game-status');
                statusElement.className = 'game-status win';

                if (currentLevel < 3) {
                    statusElement.innerHTML = `üéâ Parab√©ns! O Gumball chegou ao bolo em ${steps} passos e ${timer} segundos!<br>Clica no n√≠vel ${currentLevel + 1} para continuar!`;
                } else {
                    statusElement.innerHTML = `üèÜ INCR√çVEL! Completaste todos os n√≠veis!<br>${steps} passos em ${timer} segundos!`;
                }
            }
        }

        function restartLevel() {
            clearInterval(timerInterval);
            playerPos = { ...startPositions[currentLevel] };
            steps = 0;
            timer = 0;
            gameWon = false;
            gameStarted = false;

            document.getElementById('steps').textContent = '0';
            document.getElementById('timer').textContent = '0';
            document.getElementById('game-status').textContent = 'Usa as setas para mover o Gumball!';
            document.getElementById('game-status').className = 'game-status';

            renderMaze();
        }

        // Controlo por teclado
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'ArrowUp': e.preventDefault(); move('up'); break;
                case 'ArrowDown': e.preventDefault(); move('down'); break;
                case 'ArrowLeft': e.preventDefault(); move('left'); break;
                case 'ArrowRight': e.preventDefault(); move('right'); break;
            }
        });

        // Inicializa o jogo
        renderMaze();
    </script>
</body>
</html>
